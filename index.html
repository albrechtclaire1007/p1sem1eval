<!DOCTYPE html>
<html lang="lb">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>P1 ‚Äì Assessment (minimal, buttons right)</title>

<style>
  /* FONT */
  @font-face{
    font-family:'Schoulschr√´ft';
    src:url('https://raw.githubusercontent.com/albrechtclaire1007/schoulschreft/main/schoulschreft_bold%5B2%5D.TTF') format('truetype');
    font-weight:bold; font-style:normal; font-display:swap;
  }

  :root{
    --pink-mid:#e4b7d0; --pink-light:#f6e4ee; --pink-dark:#d88cb8;
    --ink:#1f1f1f; --white:#fff; --ok:#b7f0c8; --bad:#ffcccc; --border:3px;
  }

  *{box-sizing:border-box; -webkit-tap-highlight-color:transparent; user-select:none; outline:none;}
  html,body{
    height:100%; margin:0;
    background:linear-gradient(135deg,var(--pink-mid),var(--pink-light));
    color:var(--ink);
    font-family:'Schoulschr√´ft', Arial, sans-serif;
  }

  /* Top nav */
  .top{
    position:sticky; top:8px; z-index:10;
    display:flex; gap:12px; align-items:center; justify-content:center;
    background:var(--white);
    border:var(--border) solid var(--pink-dark);
    border-radius:18px;
    padding:.35rem .8rem; margin:10px auto; width:fit-content;
    box-shadow:0 8px 24px rgba(0,0,0,.08);
  }
  .iconBtn{
    border:var(--border) solid var(--ink);
    background:var(--white);
    color:var(--ink);
    padding:.25rem .7rem;
    border-radius:14px;
    cursor:pointer;
    font-size:1.4rem;
    line-height:1;
    min-width:2.4rem;
    display:grid;
    place-items:center;
    font-family:'Schoulschr√´ft', Arial, sans-serif;
  }
  .iconBtn:active{ transform:scale(.98); }
  .flow{opacity:.9; font-size:1rem; padding:0 .4rem; min-width:8ch; text-align:center;}
  .hidden{display:none !important;}

  .wrap{
    min-height:calc(100vh - 80px);
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:2.2vmin;
    padding:2.5vmin 3vmin 4vmin;
  }

  /* RIGHT HUD (all controls on the right) */
  .rightHud{
    width:min(1220px,95vw);
    display:flex;
    justify-content:flex-end;
  }
  .hudBox{
    display:flex;
    gap:10px;
    align-items:center;
    flex-wrap:wrap;
    justify-content:flex-end;
    background:var(--white);
    border:var(--border) solid var(--pink-dark);
    border-radius:18px;
    padding:10px 12px;
    box-shadow:0 8px 20px rgba(0,0,0,.07);
  }

  .timerCircle{
    width:64px; height:64px;
    border-radius:50%;
    background:var(--white);
    border:6px solid var(--pink-mid);
    display:grid;
    place-items:center;
    box-shadow:0 8px 20px rgba(0,0,0,.08);
    font-size:1.15rem;
  }

  .pill{
    background:var(--white);
    border:var(--border) solid var(--pink-dark);
    border-radius:999px;
    padding:.35rem .75rem;
    box-shadow:0 8px 20px rgba(0,0,0,.07);
    display:flex;
    align-items:center;
    gap:.55rem;
    font-size:1.1rem;
  }

  .btn{
    border:var(--border) solid var(--ink);
    background:var(--white);
    color:var(--ink);
    padding:.45rem .85rem;
    border-radius:14px;
    cursor:pointer;
    font-size:1.05rem;
    font-family:'Schoulschr√´ft', Arial, sans-serif;
    white-space:nowrap;
  }
  .btn:active{ transform:scale(.98); }
  .btnPrimary{ border:var(--border) solid var(--pink-dark); }

  /* EX1 grid */
  .grid6{
    width:95vw; max-width:1400px;
    display:grid;
    gap:2vmin;
    grid-template-columns:repeat(3, minmax(0, 1fr));
  }
  @media (min-width:900px){
    .grid6{ grid-template-columns:repeat(6, minmax(0, 1fr)); }
  }
  .imgToken{
    background:var(--white);
    border:6px solid var(--pink-mid);
    border-radius:22px;
    display:grid;
    place-items:center;
    aspect-ratio:1/1;
    cursor:pointer;
    transition:transform .1s ease, border-color .15s ease, background .15s ease;
    box-shadow:0 10px 26px rgba(0,0,0,.08);
  }
  .imgToken:active{ transform:scale(.97); }
  .imgToken img{ width:90%; height:90%; object-fit:contain; }

  /* tiles for numbers/colours/toys */
  .tile{
    width:90%;
    height:90%;
    border-radius:18px;
    border:6px solid var(--pink-mid);
    background:#fff;
    display:grid;
    place-items:center;
    box-shadow:0 10px 26px rgba(0,0,0,.05);
    overflow:hidden;
  }
  .tileNum{ font-size:clamp(2.6rem,9vmin,5.6rem); line-height:1; }
  .tileEmoji{ font-size:clamp(2.6rem,9vmin,5.4rem); line-height:1; }
  .tileSwatch{
    width:78%; height:78%;
    border-radius:18px;
    border:8px solid rgba(0,0,0,.10);
    box-shadow:0 8px 18px rgba(0,0,0,.08);
  }

  /* EX2 prompt */
  .rowCenter{
    width:95vw; max-width:1220px;
    display:flex;
    justify-content:center;
    align-items:center;
    gap:18px;
    flex-wrap:wrap;
  }
  .bigPrompt{
    width:min(72vmin,520px);
    aspect-ratio:1/1;
    background:#fff;
    border:12px solid var(--pink-mid);
    border-radius:40px;
    display:grid;
    place-items:center;
    box-shadow:0 10px 30px rgba(0,0,0,.08);
    overflow:hidden;
  }
  .bigPrompt img{ width:85%; height:85%; object-fit:contain; }

  /* EX3 */
  .sentence{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:min(2.2vmin,16px);
    flex-wrap:wrap;
    font-size:clamp(2.2rem,5.1vw,3.4rem);
    text-align:center;
  }
  .inlineSq{
    display:inline-grid;
    place-items:center;
    width:min(36vmin,420px);
    aspect-ratio:1/1;
    border:10px solid var(--pink-mid);
    border-radius:28px;
    background:#fff;
    box-shadow:0 8px 24px rgba(0,0,0,.08);
    overflow:hidden;
  }
  .colorSwatch{
    width:82%;
    height:82%;
    border-radius:22px;
    border:10px solid rgba(0,0,0,.12);
    box-shadow:0 8px 18px rgba(0,0,0,.08);
  }

  .flash-good{ background:var(--ok) !important; border-color:var(--ok) !important; }
  .flash-bad{ background:var(--bad) !important; border-color:var(--bad) !important; }
</style>
</head>

<body>

<div class="top">
  <button class="iconBtn" id="prev">‚óÄ</button>
  <span class="flow" id="flowLabel">1</span>
  <button class="iconBtn" id="next">‚ñ∂</button>
</div>

<!-- GAME 1 -->
<section class="wrap" id="g1">
  <div class="rightHud">
    <div class="hudBox">
      <div class="timerCircle" id="t1">01:00</div>
      <div class="pill">‚úÖ <span id="s1">0</span></div>
      <button class="btn btnPrimary" id="start1">Start</button>
      <button class="btn" id="pause1" disabled>Pause</button>
      <button class="btn" id="replay1" disabled>Replay</button>
      <button class="btn" id="skip1" disabled>Skip</button>
    </div>
  </div>

  <div class="grid6" id="grid1"></div>
</section>

<!-- GAME 2 -->
<section class="wrap hidden" id="g2">
  <div class="rightHud">
    <div class="hudBox">
      <div class="timerCircle" id="t2">01:00</div>
      <div class="pill">‚úÖ <span id="s2">0</span></div>
      <button class="btn btnPrimary" id="start2">Start</button>
      <button class="btn" id="pause2" disabled>Pause</button>
      <button class="btn" id="ok2" disabled>‚úÖ</button>
      <button class="btn" id="bad2" disabled>‚ùå</button>
    </div>
  </div>

  <div class="rowCenter">
    <div class="bigPrompt" id="prompt2"></div>
  </div>
</section>

<!-- GAME 3 -->
<section class="wrap hidden" id="g3">
  <div class="rightHud">
    <div class="hudBox">
      <div class="timerCircle" id="t3">01:00</div>
      <div class="pill">‚úÖ <span id="s3">0</span></div>
      <button class="btn btnPrimary" id="start3">Start</button>
      <button class="btn" id="pause3" disabled>Pause</button>
      <button class="btn" id="ok3" disabled>‚úÖ</button>
      <button class="btn" id="bad3" disabled>‚ùå</button>
    </div>
  </div>

  <div class="rowCenter" style="flex-direction:column; gap:14px;">
    <div class="sentence">
      <div class="inlineSq" id="noun3"></div>
      <span>ass</span>
      <div class="inlineSq" id="col3"></div>
    </div>
  </div>
</section>

<audio id="speaker" preload="auto"></audio>

<script>
/* =========================================================
   DATA
   ========================================================= */

/* Numbers audio base (1.mp3 ... 20.mp3) */
const NUM_AUDIO_BASE = "https://github.com/albrechtclaire1007/zuelen1-20kub/raw/refs/heads/main";

/* School supplies (your links) */
const SCHOOL_AUDIO_BASE = "https://github.com/albrechtclaire1007/p1schoulsaachen/raw/refs/heads/main";
const SCHOOL = [
  { id:'blaisteft',         label:'e Bl√§isteft',         img:'https://i.postimg.cc/5YJ7PXCx/blaisteft.png',          audio:`${SCHOOL_AUDIO_BASE}/Bl√§isteft.mp3` },
  { id:'blaisteftsfaarwen', label:'Bl√§ist√´ftsfaarwen',   img:'https://i.postimg.cc/rdxZC1K8/blaisteftsfaarwen.png',  audio:`${SCHOOL_AUDIO_BASE}/Bl√§isteftsfaarwen.mp3` },
  { id:'buch',              label:'e Buch',              img:'https://i.postimg.cc/R6msPWHv/buch.png',               audio:`${SCHOOL_AUDIO_BASE}/Buch.mp3` },
  { id:'classeur',          label:'e Classeur',          img:'https://i.postimg.cc/5HLKqB6d/classeur.png',           audio:`${SCHOOL_AUDIO_BASE}/Classeur.mp3` },
  { id:'gummi',             label:'e Gummi',             img:'https://i.postimg.cc/gXpSMxZd/gummi.png',              audio:`${SCHOOL_AUDIO_BASE}/Gummi.mp3` },
  { id:'heft',              label:'e Heft',              img:'https://i.postimg.cc/NymC765s/heft.png',               audio:`${SCHOOL_AUDIO_BASE}/Heft.mp3` },
  { id:'joffer',            label:'eng Joffer',          img:'https://i.postimg.cc/SnwtMTQt/joffer.png',             audio:`${SCHOOL_AUDIO_BASE}/Joffer.mp3` },
  { id:'lineal',            label:'e Lineal',            img:'https://i.postimg.cc/r0TnhDrT/lineal.png',             audio:`${SCHOOL_AUDIO_BASE}/Lineal.mp3` },
  { id:'pech',              label:'e Pech',              img:'https://i.postimg.cc/1nSCW8qq/pech.png',               audio:`${SCHOOL_AUDIO_BASE}/Pech.mp3` },
  { id:'schachtel',         label:'eng Schachtel',       img:'https://i.postimg.cc/rDvYrnyn/schachtel.png',          audio:`${SCHOOL_AUDIO_BASE}/Schachtel.mp3` },
  { id:'scheier',           label:'eng Sch√©ier',         img:'https://i.postimg.cc/ZBm7fWdN/scheier.png',            audio:`${SCHOOL_AUDIO_BASE}/Sch√©ier.mp3` },
  { id:'schoulsak',         label:'e Schoulsak',         img:'https://i.postimg.cc/cKwkMR65/schoulsak.png',          audio:`${SCHOOL_AUDIO_BASE}/Schoulsak.mp3` },
  { id:'schwamp',           label:'e Schwamp',           img:'https://i.postimg.cc/9D4nz5hs/schwamp.png',            audio:`${SCHOOL_AUDIO_BASE}/Schwamp.mp3` },
  { id:'spetzer',           label:'e Sp√´tzer',           img:'https://i.postimg.cc/BjdwKYZV/spetzer.png',            audio:`${SCHOOL_AUDIO_BASE}/Sp√´tzer.mp3` },
  { id:'tafel',             label:'eng Tafel',           img:'https://i.postimg.cc/VJ3HCGsT/tafel.png',              audio:`${SCHOOL_AUDIO_BASE}/Tafel.mp3` },
  { id:'tuschfaarwen',      label:'Tuschfaarwen',        img:'https://i.postimg.cc/McV3b7vp/tuschfaarwen.png',       audio:`${SCHOOL_AUDIO_BASE}/Tuschfaarwen.mp3` }
];

/* Numbers 1‚Äì10 with audio */
const NUMBERS = Array.from({length:10}, (_,i)=>({
  id:`num${i+1}`,
  type:'num',
  label:String(i+1),
  audio:`${NUM_AUDIO_BASE}/${i+1}.mp3`
}));

/* Colours (silent) */
const COLOURS = [
  { id:'rout',   type:'col', hex:'#e53935' },
  { id:'blo',    type:'col', hex:'#1e88e5' },
  { id:'gr√©ng',  type:'col', hex:'#43a047' },
  { id:'giel',   type:'col', hex:'#fdd835' },
  { id:'orange', type:'col', hex:'#fb8c00' },
  { id:'rosa',   type:'col', hex:'#d81b60' }
];

/* Toys (placeholder emoji tiles)
   Paste your Spillsaachen ITEMS array later (img+audio) and replace this block if you want real assets. */
const TOYS = [
  { id:'ball',   type:'toy', emoji:'‚öΩÔ∏è' },
  { id:'popp',   type:'toy', emoji:'ü™Ü' },
  { id:'teddy',  type:'toy', emoji:'üß∏' },
  { id:'auto',   type:'toy', emoji:'üöó' },
  { id:'zuch',   type:'toy', emoji:'üöÇ' },
  { id:'puzzle', type:'toy', emoji:'üß©' }
];

const SCHOOL_MIX = SCHOOL.map(x=>({ type:'img', id:x.id, img:x.img, audio:x.audio }));

/* Pools */
const POOL_ALL = [
  ...SCHOOL_MIX,
  ...NUMBERS,
  ...COLOURS,
  ...TOYS
];

const NOUNS3 = [
  ...SCHOOL_MIX,
  ...TOYS
];

/* =========================================================
   UTIL
   ========================================================= */
function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}
function pad2(n){ return String(n).padStart(2,'0'); }
function formatTime(sec){ return `${pad2(Math.floor(sec/60))}:${pad2(sec%60)}`; }

function flash(el, ok){
  el.classList.remove('flash-good','flash-bad');
  void el.offsetWidth;
  el.classList.add(ok ? 'flash-good' : 'flash-bad');
  setTimeout(()=> el.classList.remove('flash-good','flash-bad'), 220);
}

const speaker = document.getElementById('speaker');
async function playSound(src){
  try{
    if(!src) return;
    if(speaker.src !== src) speaker.src = src;
    await speaker.play();
  }catch(e){}
}

/* =========================================================
   NAV
   ========================================================= */
const pages = ["g1","g2","g3"];
let pageIdx = 0;
const flowLabel = document.getElementById('flowLabel');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');

function updateNav(){
  flowLabel.textContent = String(pageIdx+1);
  prevBtn.classList.toggle('hidden', pageIdx===0);
  nextBtn.classList.toggle('hidden', pageIdx===pages.length-1);
}
function showPage(i){
  pageIdx = Math.max(0, Math.min(pages.length-1, i));
  pages.forEach((id,idx)=>document.getElementById(id).classList.toggle('hidden', idx!==pageIdx));
  updateNav();
}
prevBtn.onclick = ()=> showPage(pageIdx-1);
nextBtn.onclick = ()=> showPage(pageIdx+1);

/* =========================================================
   TIMER
   ========================================================= */
function makeTimer(durationSec, onTick, onDone){
  let remaining = durationSec;
  let running = false;
  let intId = null;

  function tick(){
    if(!running) return;
    remaining -= 1;
    onTick(remaining);
    if(remaining <= 0){
      stop(true);
      onDone();
    }
  }
  function start(){
    if(running) return;
    running = true;
    onTick(remaining);
    intId = setInterval(tick, 1000);
  }
  function pause(){
    if(!running) return;
    running = false;
    clearInterval(intId);
    intId = null;
  }
  function reset(){
    pause();
    remaining = durationSec;
    onTick(remaining);
  }
  function stop(finished=false){
    running = false;
    clearInterval(intId);
    intId = null;
    if(finished) remaining = 0;
    onTick(remaining);
  }
  function isRunning(){ return running; }
  return { start, pause, reset, stop, isRunning };
}

/* =========================================================
   TILE BUILDERS
   ========================================================= */
function makeTileNumber(n){
  const d = document.createElement('div');
  d.className = 'tile';
  const t = document.createElement('div');
  t.className = 'tileNum';
  t.textContent = n;
  d.appendChild(t);
  return d;
}
function makeTileColour(hex){
  const d = document.createElement('div');
  d.className = 'tile';
  const s = document.createElement('div');
  s.className = 'tileSwatch';
  s.style.background = hex;
  if(hex.toLowerCase() === '#ffffff'){
    s.style.border = '10px solid rgba(0,0,0,.22)';
  }
  d.appendChild(s);
  return d;
}
function makeTileToy(emoji){
  const d = document.createElement('div');
  d.className = 'tile';
  const t = document.createElement('div');
  t.className = 'tileEmoji';
  t.textContent = emoji;
  d.appendChild(t);
  return d;
}

/* =========================================================
   GAME 1: 6 choices, only correct counts, Skip available
   ========================================================= */
const grid1 = document.getElementById('grid1');
const t1El = document.getElementById('t1');
const s1El = document.getElementById('s1');
const start1Btn = document.getElementById('start1');
const pause1Btn = document.getElementById('pause1');
const replay1Btn = document.getElementById('replay1');
const skip1Btn = document.getElementById('skip1');

let timer1 = makeTimer(60, (sec)=> t1El.textContent = formatTime(sec), ()=> finish1());
let score1 = 0;
let g1Locked = true;
let current1 = null;

function buildRound1(){
  const target = POOL_ALL[Math.floor(Math.random()*POOL_ALL.length)];
  const pool = POOL_ALL.filter(x=> x.id !== target.id);
  shuffle(pool);
  const options = shuffle([target, ...pool.slice(0,5)]);
  return { target, options };
}

function renderOptionButton1(opt){
  const b = document.createElement('button');
  b.className = 'imgToken';

  if(opt.type === 'img'){
    const img = document.createElement('img');
    img.src = opt.img;
    img.alt = '';
    b.appendChild(img);
  }else if(opt.type === 'num'){
    b.appendChild(makeTileNumber(opt.label));
  }else if(opt.type === 'col'){
    b.appendChild(makeTileColour(opt.hex));
  }else if(opt.type === 'toy'){
    b.appendChild(makeTileToy(opt.emoji));
  }
  return b;
}

function cue1(){
  replay1Btn.disabled = true;
  if(!current1) return;
  if(current1.target.audio){
    replay1Btn.disabled = false;
    playSound(current1.target.audio);
  }
}

function next1(){
  current1 = buildRound1();
  grid1.innerHTML = "";
  current1.options.forEach(opt=>{
    const b = renderOptionButton1(opt);
    b.onclick = ()=>{
      if(g1Locked) return;
      const ok = opt.id === current1.target.id;
      flash(b, ok);
      if(ok){
        score1 += 1;
        s1El.textContent = String(score1);
        setTimeout(()=>{ next1(); cue1(); }, 180);
      }
    };
    grid1.appendChild(b);
  });
  cue1();
}

function startG1(){
  score1 = 0;
  s1El.textContent = "0";
  g1Locked = false;

  timer1.reset();
  timer1.start();

  start1Btn.disabled = true;
  pause1Btn.disabled = false;
  pause1Btn.textContent = "Pause";
  skip1Btn.disabled = false;

  next1();
}

function togglePause1(){
  if(g1Locked) return;
  if(timer1.isRunning()){
    timer1.pause();
    pause1Btn.textContent = "Weider";
  }else{
    timer1.start();
    pause1Btn.textContent = "Pause";
  }
}

function skip1(){
  if(g1Locked) return;
  next1();
}

function finish1(){
  g1Locked = true;
  timer1.stop(true);
  start1Btn.disabled = false;
  pause1Btn.disabled = true;
  replay1Btn.disabled = true;
  skip1Btn.disabled = true;
  // no finish text
}

start1Btn.onclick = startG1;
pause1Btn.onclick = togglePause1;
replay1Btn.onclick = ()=>{ if(!g1Locked && current1 && current1.target.audio) playSound(current1.target.audio); };
skip1Btn.onclick = skip1;

/* =========================================================
   GAME 2: teacher marks (mixed), only correct counts
   ========================================================= */
const t2El = document.getElementById('t2');
const s2El = document.getElementById('s2');
const start2Btn = document.getElementById('start2');
const pause2Btn = document.getElementById('pause2');
const ok2Btn = document.getElementById('ok2');
const bad2Btn = document.getElementById('bad2');
const prompt2 = document.getElementById('prompt2');

let timer2 = makeTimer(60, (sec)=> t2El.textContent = formatTime(sec), ()=> finish2());
let score2 = 0;
let g2Locked = true;
let bag2 = [];
let current2 = null;

function refill2(){ bag2 = shuffle([...POOL_ALL]); }

function renderCardInto(el, item){
  el.innerHTML = "";
  if(item.type === 'img'){
    const img = document.createElement('img');
    img.src = item.img;
    img.alt = '';
    el.appendChild(img);
  }else if(item.type === 'num'){
    el.appendChild(makeTileNumber(item.label));
  }else if(item.type === 'col'){
    el.appendChild(makeTileColour(item.hex));
  }else if(item.type === 'toy'){
    el.appendChild(makeTileToy(item.emoji));
  }
}

function next2(){
  if(bag2.length === 0) refill2();
  current2 = bag2.pop();
  renderCardInto(prompt2, current2);
}

function startG2(){
  score2 = 0;
  s2El.textContent = "0";
  g2Locked = false;

  timer2.reset();
  timer2.start();

  start2Btn.disabled = true;
  pause2Btn.disabled = false;
  pause2Btn.textContent = "Pause";
  ok2Btn.disabled = false;
  bad2Btn.disabled = false;

  refill2();
  next2();
}

function togglePause2(){
  if(g2Locked) return;
  if(timer2.isRunning()){
    timer2.pause();
    pause2Btn.textContent = "Weider";
  }else{
    timer2.start();
    pause2Btn.textContent = "Pause";
  }
}

function mark2(isCorrect){
  if(g2Locked) return;
  if(isCorrect){
    score2 += 1;
    s2El.textContent = String(score2);
    flash(ok2Btn, true);
  }else{
    flash(bad2Btn, false);
  }
  setTimeout(next2, 140);
}

function finish2(){
  g2Locked = true;
  timer2.stop(true);
  start2Btn.disabled = false;
  pause2Btn.disabled = true;
  ok2Btn.disabled = true;
  bad2Btn.disabled = true;
  // no finish text
}

start2Btn.onclick = startG2;
pause2Btn.onclick = togglePause2;
ok2Btn.onclick = ()=> mark2(true);
bad2Btn.onclick = ()=> mark2(false);

/* =========================================================
   GAME 3: teacher marks (noun + colour), only correct counts
   ========================================================= */
const t3El = document.getElementById('t3');
const s3El = document.getElementById('s3');
const start3Btn = document.getElementById('start3');
const pause3Btn = document.getElementById('pause3');
const ok3Btn = document.getElementById('ok3');
const bad3Btn = document.getElementById('bad3');
const noun3Box = document.getElementById('noun3');
const col3Box = document.getElementById('col3');

let timer3 = makeTimer(60, (sec)=> t3El.textContent = formatTime(sec), ()=> finish3());
let score3 = 0;
let g3Locked = true;
let bagN3 = [];
let bagC3 = [];
let current3 = { noun:null, col:null };

function refill3(){
  bagN3 = shuffle([...NOUNS3]);
  bagC3 = shuffle([...COLOURS]);
}

function next3(){
  if(bagN3.length === 0) bagN3 = shuffle([...NOUNS3]);
  if(bagC3.length === 0) bagC3 = shuffle([...COLOURS]);

  current3.noun = bagN3.pop();
  current3.col = bagC3.pop();

  // noun
  noun3Box.innerHTML = "";
  if(current3.noun.type === 'img'){
    const img = document.createElement('img');
    img.src = current3.noun.img;
    img.alt = '';
    img.style.width = "85%";
    img.style.height = "85%";
    img.style.objectFit = "contain";
    noun3Box.appendChild(img);
  }else{
    noun3Box.appendChild(makeTileToy(current3.noun.emoji));
  }

  // colour
  col3Box.innerHTML = "";
  const sw = document.createElement('div');
  sw.className = "colorSwatch";
  sw.style.background = current3.col.hex;
  col3Box.appendChild(sw);
}

function startG3(){
  score3 = 0;
  s3El.textContent = "0";
  g3Locked = false;

  timer3.reset();
  timer3.start();

  start3Btn.disabled = true;
  pause3Btn.disabled = false;
  pause3Btn.textContent = "Pause";
  ok3Btn.disabled = false;
  bad3Btn.disabled = false;

  refill3();
  next3();
}

function togglePause3(){
  if(g3Locked) return;
  if(timer3.isRunning()){
    timer3.pause();
    pause3Btn.textContent = "Weider";
  }else{
    timer3.start();
    pause3Btn.textContent = "Pause";
  }
}

function mark3(isCorrect){
  if(g3Locked) return;
  if(isCorrect){
    score3 += 1;
    s3El.textContent = String(score3);
    flash(ok3Btn, true);
  }else{
    flash(bad3Btn, false);
  }
  setTimeout(next3, 140);
}

function finish3(){
  g3Locked = true;
  timer3.stop(true);
  start3Btn.disabled = false;
  pause3Btn.disabled = true;
  ok3Btn.disabled = true;
  bad3Btn.disabled = true;
  // no finish text
}

start3Btn.onclick = startG3;
pause3Btn.onclick = togglePause3;
ok3Btn.onclick = ()=> mark3(true);
bad3Btn.onclick = ()=> mark3(false);

/* =========================================================
   INIT
   ========================================================= */
showPage(0);
updateNav();
</script>

</body>
</html>

